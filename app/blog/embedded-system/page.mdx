import { Image } from "@heroui/image";
import {LCRKmap, KmapML, KmapMR} from "./table-kMap"

# Embedded System สู่โลกของระบบฝังตัว
Embedded System หรือระบบฝังตัว คือระบบคอมพิวเตอร์ที่ได้รับการออกแบบมาเพื่อดำเนินงานเฉพาะด้านโดยใช้ฮาร์ดแวร์และซอฟต์แวร์ที่ผสานเข้าด้วยกันอย่างสมบูรณ์ ระบบนี้ถูกนำมาใช้ในอุปกรณ์อิเล็กทรอนิกส์ต่างๆ เช่น โทรศัพท์มือถือ เครื่องใช้ไฟฟ้า ยานยนต์ และอุปกรณ์ IoT (Internet of Things) เพื่อทำหน้าที่เฉพาะเจาะจง

## คำย่อที่ใช้เรียกระบบควบคุมที่ใช้ฮาร์ดแวร์เป็นหลักในการทำงานมีหลายคำ เช่น
- **ระบบฝังตัว (Embedded System)** เป็นคำที่ครอบคลุมระบบควบคุมที่ถูกฝังอยู่ในอุปกรณ์ต่างๆ เช่น ไมโครคอนโทรลเลอร์, ไมโครโปรเซสเซอร์ ซึ่งมักจะใช้ฮาร์ดแวร์เป็นหลักในการควบคุม
- **ระบบควบคุมแบบดิจิทัล (Digital Control System)** เน้นย้ำว่าระบบใช้สัญญาณดิจิทัลในการควบคุม ซึ่งมักจะเกี่ยวข้องกับการใช้ไมโครคอนโทรลเลอร์หรือไมโครโปรเซสเซอร์
- **ระบบควบคุมแบบลอจิก (Logic Control System)** เน้นย้ำการใช้ตรรกะในการควบคุม โดยเฉพาะการใช้ลอจิกเกตต่างๆ เช่น AND, OR, NOT
- **ระบบควบคุมแบบโปรแกรม (Programmable Logic Controller PLC)** เป็นระบบควบคุมอุตสาหกรรมที่ใช้ฮาร์ดแวร์เฉพาะทางในการควบคุมกระบวนการผลิตต่างๆ

## ลักษณะของ Embedded System
**Embedded System** ได้รับการออกแบบมาเพื่อตอบสนองการใช้งานที่เฉพาะเจาะจง เช่น ระบบควบคุมอุณหภูมิ หรือระบบควบคุมเครื่องจักร ระบบฝังตัวส่วนใหญ่ต้องการการตอบสนองที่แม่นยำและรวดเร็ว เช่น ระบบเบรก ABS ในยานยนต์ แต่มักมีข้อจำกัดด้านหน่วยประมวลผล หน่วยความจำ

## องค์ประกอบของ Embedded System
#### ฮาร์ดแวร์ (Hardware) 
- ไมโครคอนโทรลเลอร์ (Microcontroller)
- เซ็นเซอร์ (Sensors)
- แอคทูเอเตอร์ (Actuators)
#### ซอฟต์แวร์ (Software)
- เฟิร์มแวร์ (Firmware)
- ระบบปฏิบัติการฝังตัว (Embedded Operating System)
#### การสื่อสาร (Communication)
- การเชื่อมต่อ เช่น UART, I2C, SPI, หรือโปรโตคอลไร้สาย เช่น Bluetooth, Zigbee

## ข้อดีและข้อเสียของ Embedded System
#### ข้อดี
- ขนาดเล็กและประหยัดพลังงาน
- ประสิทธิภาพสูงเมื่อออกแบบสำหรับงานเฉพาะ
- มีความน่าเชื่อถือและเสถียรภาพ
#### ข้อเสีย
- มีข้อจำกัดในการอัปเกรดและปรับปรุง
- ต้องการการออกแบบที่ซับซ้อนในขั้นต้น
- ยากต่อการแก้ไขข้อผิดพลาดหลังการผลิต

### แนวโน้มในอนาคต
การพัฒนาระบบ Embedded System คาดว่าจะเน้นไปที่การสนับสนุน AI และ Machine Learning มากขึ้น
และการเชื่อมต่อกับเทคโนโลยี 5G จะทำให้ระบบฝังตัวมีความสามารถเพิ่มขึ้น โดยเฉพาะในอุปกรณ์ IoT
### Light-following vehicle
การสร้างรถเดินตามแสงเป็นตัวอย่างหนึ่งของการนำ Embedded System มาใช้ในชีวิตจริง โดยในโปรเจกต์นี้จะใช้ระบบควบคุมแบบลอจิก (Logic Control System) ซึ่งใช้การคำนวณสมการตรรกศาสตร์ด้วย K-map เพื่อควบคุมการทำงานของรถ

- Integrated Circuit IC (AND, OR, NOT)
- เซ็นเซอร์แสง (Light Sensors)
- มอเตอร์และล้อ (Motors and Wheels)
- วงจรลอจิก (Logic Circuits)

### ตัวอย่างสมการตรรกศาสตร์
สมมติว่าเรามีเซ็นเซอร์แสงสองตัว (L1 และ L2) และมอเตอร์สองตัว (M1 และ M2) เราสามารถใช้ K-map เพื่อคำนวณสมการตรรกศาสตร์ที่ควบคุมการทำงานของมอเตอร์ได้ดังนี้

- เมื่อ L1 ตรวจจับแสงและ L2 ไม่ตรวจจับแสง: M1 = 1, M2 = 0
- เมื่อ L2 ตรวจจับแสงและ L1 ไม่ตรวจจับแสง: M1 = 0, M2 = 1
- เมื่อทั้ง L1 และ L2 ตรวจจับแสง M1 = 1, M2 = 1
- เมื่อไม่มีเซ็นเซอร์ใดตรวจจับแสง M1 = 0, M2 = 0

จากนั้นใช้ K-map เพื่อหาสมการตรรกศาสตร์ที่เหมาะสมสำหรับการควบคุมมอเตอร์ แน่นอนว่าค่าที่ได้จาก Light Sensors นั้นเป็น Analog เราเลยจะมีวงจรแบงแรงดันเพื่องแปลงสัญญาณ Analog ที่ได้จาก Light Sensors เป็น Digital
#### ตารางค่าความจริง (Truth Table)
<LCRKmap/>
#### ML K-Map L CR: C + R (OR Gate)
<KmapML/>
#### MR K-Map L CR: L + C + R (OR Gate)
<KmapMR/>

### วงจรแบ่งแรงดัน (Voltage Divider หรือ Potential Divider)
เราเลือกใช้ Op-amp เบอร์ 741 มาใช้ร่วมกับวงจรแบ่งแรงดัน (Voltage Divider) เพื่อแปลงสัญญาณ Analog ที่ได้จาก Light Sensors เป็น Digital หลักการคือ ถ้าแรงดันขา in+ และ in- รวมกันแล้วมีค่า >= 6V ฝั่ง output ก็จะปล่อยไฟ 6V ถ้า in+ และ in- รวมกันแล้วมีค่า < 6V ฝั่ง output ก็จะปล่อยไฟ 0V ก็จะแทนได้ว่า 0 1
#### ตัวอย่างวงจร
<Image src="/ldr-op-amp-circuit-animation.gif" alt="vt2" className="size-5/6 mx-auto"/>

#### วงจรโดยรวม
<Image src="/embedded-system.png" alt="embedded" className="size-5/6 mx-auto" isZoomed/>
สามารถ Simulation และดูอุปกรณ์ที่ใช้ หรือดู Schematic ได้ที่ [My Tinkercad](https://www.tinkercad.com/things/a9ByuVDriVn-phonsing-taleman)
### สรุป
Embedded System เป็นส่วนสำคัญของเทคโนโลยีสมัยใหม่ที่ช่วยให้เกิดความสะดวกสบายและเพิ่มประสิทธิภาพในการใช้งานอุปกรณ์ต่างๆ ด้วยการพัฒนาอย่างต่อเนื่องของฮาร์ดแวร์และซอฟต์แวร์ ระบบฝังตัวจึงมีศักยภาพที่จะเปลี่ยนแปลงโลกได้อย่างมากในอนาคต